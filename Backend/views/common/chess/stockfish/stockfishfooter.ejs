<script src="https://code.jquery.com/jquery-1.10.2.js"></script>
<script type="text/html" src="jQuery.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/chess.js/0.10.2/chess.js"></script>
<script src="js/chessboard-0.3.0.js"></script>
<script src="js/enginegame.js"></script>
<script>
    var wait_for_script;
    var newGame = function (){};

    /// We can load Stockfish.js via Web Workers or directly via a <script> tag.
    /// Web Workers are better since they don't block the UI, but they are not always avaiable.
    (function fix_workers()
    {
        var script_tag;
        /// Does the environment support web workers?  If not, include stockfish.js directly.
        ///NOTE: Since web workers don't work when a page is loaded from the local system, we have to fake it there too. (Take that security measures!)
        if (!Worker || (location && location.protocol === "file:")) {
            var script_tag  = document.createElement("script");
            script_tag.type ="text/javascript";
            script_tag.src  = "stockfish.js";
            script_tag.onload = init;
            document.getElementsByTagName("head")[0].appendChild(script_tag);
            wait_for_script = true;
        }
    }());

    function init()
    {
        var game = engineGame();

        newGame = function newGame() {
            var baseTime = 5 * 60;
            var inc = 2;
            var skill = 10;
            game.reset();
            game.setTime(baseTime, inc);
            game.setSkillLevel(skill);
            game.start();
        }
        newGame();
    }

    /// If we load Stockfish.js via a <script> tag, we need to wait until it loads.
    if (!wait_for_script) {
        document.addEventListener("DOMContentLoaded", init);
    }
</script>
</body>
</html>